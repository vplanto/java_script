# Workshop: –ë–µ–∑–ø–µ—á–Ω–∞ –ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è (Auth & Security)

–ú–∏ –ø–æ—á–∏–Ω–∞—î–º–æ –±—É–¥—É–≤–∞—Ç–∏ —Ñ—ñ–Ω–∞–ª—å–Ω–∏–π –ø—Ä–æ—î–∫—Ç –∫—É—Ä—Å—É ‚Äî –≥—Ä—É **"–ö–∞–º—ñ–Ω—å-–ù–æ–∂–∏—Ü—ñ-–ü–∞–ø—ñ—Ä MMO"**.
–ê–ª–µ –±—É–¥—å-—è–∫–∞ —Å–µ—Ä–π–æ–∑–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è –Ω–µ –∑ –≥—Ä–∏, –∞ –∑ **–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞**.

–í–∞—à–µ –∑–∞–≤–¥–∞–Ω–Ω—è: —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Å–∏—Å—Ç–µ–º—É –≤—Ö–æ–¥—É, —è–∫–∞ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—î –ø–∞—Ä–æ–ª—ñ —É –≤—ñ–¥–∫—Ä–∏—Ç–æ–º—É –≤–∏–≥–ª—è–¥—ñ.

## 1. –ó–∞–¥–∞—á–∞ –Ü–Ω–∂–µ–Ω–µ—Ä–∞

–ú–∏ –º–∞—î–º–æ —Ñ–æ—Ä–º—É —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó (–õ–æ–≥—ñ–Ω, –ü–∞—Ä–æ–ª—å).
–ú–∏ —Ö–æ—á–µ–º–æ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —É `localStorage` (–±–æ —É –Ω–∞—Å –Ω–µ–º–∞—î –±–µ–∫–µ–Ω–¥—É).

**–ü—Ä–æ–±–ª–µ–º–∞:** –Ø–∫—â–æ –º–∏ –∑–±–µ—Ä–µ–∂–µ–º–æ `{"password": "123"}`, –±—É–¥—å-—è–∫–∏–π XSS-—Å–∫—Ä–∏–ø—Ç –∞–±–æ –ª—é–¥–∏–Ω–∞, —â–æ —Å—ñ–ª–∞ –∑–∞ –≤–∞—à –∫–æ–º–ø'—é—Ç–µ—Ä, –≤–∫—Ä–∞–¥–µ –ø–∞—Ä–æ–ª—å.

**–†—ñ—à–µ–Ω–Ω—è:** –ú–∏ –±—É–¥–µ–º–æ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ **–•–µ—à** (Hash).
`"123"` -> `SHA-256` -> `"a665a45920422f9d417e4867efdc4fb8a04a1f3fff1fa07e998e86f7f7a27ae3"`

## 2. Web Crypto API (‚ö†Ô∏è EDUCATIONAL ONLY)

> **üö® CRITICAL SECURITY WARNING: NEVER DO THIS IN PRODUCTION**
>
> –ú–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –∫–ª—ñ—î–Ω—Ç—Å—å–∫–µ —Ö–µ—à—É–≤–∞–Ω–Ω—è **–¢–Ü–õ–¨–ö–ò** —Ç–æ–º—É, —â–æ —É –Ω–∞—Å –Ω–µ–º–∞—î —Å–µ—Ä–≤–µ—Ä—É (—Ü–µ –Ω–∞–≤—á–∞–ª—å–Ω–∏–π –ø—Ä–æ—î–∫—Ç —ñ–∑ `localStorage`).
>
> **–ü—Ä–æ–±–ª–µ–º–∞: Pass-the-Hash Attack**
> - –Ø–∫—â–æ –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫ –ø–µ—Ä–µ—Ö–æ–ø–∏—Ç—å —Ö–µ—à (—á–µ—Ä–µ–∑ Network –∞–±–æ XSS), –≤—ñ–Ω –º–æ–∂–µ –∞–≤—Ç–æ—Ä–∏–∑—É–≤–∞—Ç–∏—Å—è **–ë–ï–ó –ó–ù–ê–ù–ù–Ø –ü–ê–†–û–õ–Æ**, –ø—Ä–æ—Å—Ç–æ –ø—ñ–¥—Å—Ç–∞–≤–∏–≤—à–∏ —Ö–µ—à.
> - –•–µ—à, –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏–π –Ω–∞ –∫–ª—ñ—î–Ω—Ç—ñ, —Å—Ç–∞—î **–µ–∫–≤—ñ–≤–∞–ª–µ–Ω—Ç–æ–º –ø–∞—Ä–æ–ª—é**.
>
> **–ü—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥ (Production):**
> 1. –ö–ª—ñ—î–Ω—Ç –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î **—á–∏—Å—Ç–∏–π –ø–∞—Ä–æ–ª—å** –ø–æ HTTPS (TLS —à–∏—Ñ—Ä—É—î –∫–∞–Ω–∞–ª).
> 2. **–°–µ—Ä–≤–µ—Ä** —Ö–µ—à—É—î –ø–∞—Ä–æ–ª—å —ñ–∑ **Salt** (–≤–∏–ø–∞–¥–∫–æ–≤–∏–π —Ä—è–¥–æ–∫, —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —é–∑–µ—Ä–∞) —Ç–∞ –∑–±–µ—Ä—ñ–≥–∞—î `hash(password + salt)`.
> 3. –ü–æ–≤—Ç–æ—Ä–Ω–∞ –∞—Ç–∞–∫–∞ –Ω–µ–º–æ–∂–ª–∏–≤–∞: –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫ –≤–∏–∫—Ä–∞–¥–µ —Ö–µ—à —ñ–∑ –±–∞–∑–∏, –≤—ñ–Ω –Ω–µ –∑–º–æ–∂–µ –π–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ (—Ö–µ—à !== –ø–∞—Ä–æ–ª—å, –∞ salt —Ä–æ–±–∏—Ç—å brute-force –Ω–∞–¥—Ç–æ –¥–æ—Ä–æ–≥–∏–º).
>
> –ú–∏ –≤—á–∏–º–æ –∫–ª—ñ—î–Ω—Ç—Å—å–∫–µ —Ö–µ—à—É–≤–∞–Ω–Ω—è, —â–æ–± –≤–∏ **—Ä–æ–∑—É–º—ñ–ª–∏ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ—ñ—á–Ω—ñ –ø—Ä–∏–º—ñ—Ç–∏–≤–∏** (SHA-256), –∞–ª–µ **–Ω—ñ–∫–æ–ª–∏ –Ω–µ —Ä–æ–±–∏–ª–∏ —Ü–µ —É —Ä–µ–∞–ª—å–Ω–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö**.

–ë—Ä–∞—É–∑–µ—Ä –º–∞—î –≤–±—É–¥–æ–≤–∞–Ω–∏–π –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ—ñ—á–Ω–∏–π –º–æ–¥—É–ª—å `window.crypto`. –í–∏–∫–æ—Ä–∏—Å—Ç–∞—î–º–æ –π–æ–≥–æ –¥–ª—è –Ω–∞–≤—á–∞–ª—å–Ω–∏—Ö —Ü—ñ–ª–µ–π:

```javascript
async function hashPassword(password) {
    const encoder = new TextEncoder();
    const data = encoder.encode(password);
    
    // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ SHA-256 (Secure Hash Algorithm)
    const hashBuffer = await crypto.subtle.digest('SHA-256', data);
    
    // –ö–æ–Ω–≤–µ—Ä—Ç—É—î–º–æ –±—ñ–Ω–∞—Ä–Ω–∏–π –±—É—Ñ–µ—Ä —É —à—ñ—Å—Ç–Ω–∞–¥—Ü—è—Ç–∫–æ–≤–∏–π —Ä—è–¥–æ–∫ (hex string)
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
    
    return hashHex;
}
```

> **–¢–µ—Ö–Ω—ñ—á–Ω–∞ –ø—Ä–∏–º—ñ—Ç–∫–∞:** –¶–µ–π API –ø—Ä–∞—Ü—é—î —Ç—ñ–ª—å–∫–∏ –≤ **Secure Context** (HTTPS –∞–±–æ `localhost`). –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω–∏–π —Å–µ—Ä–≤–µ—Ä (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, Live Server —É VS Code).

## 3\. –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è (Sign Up)

–†–µ–∞–ª—ñ–∑—É–π—Ç–µ –ª–æ–≥—ñ–∫—É:

1.  –û—Ç—Ä–∏–º–∞—Ç–∏ –¥–∞–Ω—ñ –∑ —Ñ–æ—Ä–º–∏.
2.  –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ —ñ—Å–Ω—É—î —é–∑–µ—Ä –∑ —Ç–∞–∫–∏–º –Ω—ñ–∫–æ–º (—É –º–∞—Å–∏–≤—ñ `users`).
3.  –ó–∞—Ö–µ—à—É–≤–∞—Ç–∏ –ø–∞—Ä–æ–ª—å (`await hashPassword(...)`).
4.  –ó–±–µ—Ä–µ–≥—Ç–∏ –æ–±'—î–∫—Ç —é–∑–µ—Ä–∞ (–∑ **—Ö–µ—à–µ–º**, –∞ –Ω–µ –ø–∞—Ä–æ–ª–µ–º) —É –º–∞—Å–∏–≤.
5.  –ó–±–µ—Ä–µ–≥—Ç–∏ –º–∞—Å–∏–≤ —É `localStorage`.

```javascript
const newUser = {
    nickname: "player1",
    passwordHash: "a665...", // –ë–ï–ó–ü–ï–ß–ù–û
    stats: { wins: 0, losses: 0 }
};
```

## 4\. –í—Ö—ñ–¥ (Log In)

–Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø–∞—Ä–æ–ª—å, —è–∫—â–æ –º–∏ –π–æ–≥–æ –Ω–µ –∑–Ω–∞—î–º–æ?

1.  –Æ–∑–µ—Ä –≤–≤–æ–¥–∏—Ç—å "123".
2.  –ú–∏ —Ö–µ—à—É—î–º–æ —Ü–µ -\> "a665...".
3.  –ú–∏ –ø–æ—Ä—ñ–≤–Ω—é—î–º–æ —Ü–µ–π —Ö–µ—à –∑ —Ç–∏–º, —â–æ –ª–µ–∂–∏—Ç—å —É –±–∞–∑—ñ.
4.  –ó–±—ñ–≥–∞—é—Ç—å—Å—è? –î–æ—Å—Ç—É–ø –¥–æ–∑–≤–æ–ª–µ–Ω–æ.

## 5\. –ß–µ–ª–µ–Ω–¥–∂ "–ó–ª–∞–º" (Security Analysis)

1.  –ó–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ —é–∑–µ—Ä–∞ –∑ –ø–∞—Ä–æ–ª–µ–º "secret".
2.  –í—ñ–¥–∫—Ä–∏–π—Ç–µ DevTools -> Application -> Local Storage.
3.  –ó–Ω–∞–π–¥—ñ—Ç—å —Ç–∞–º –∑–∞–ø–∏—Å `users`.
4.  –°–ø—Ä–æ–±—É–π—Ç–µ "–≤–≥–∞–¥–∞—Ç–∏" –ø–∞—Ä–æ–ª—å, –¥–∏–≤–ª—è—á–∏—Å—å —Ç—ñ–ª—å–∫–∏ –Ω–∞ —Ö–µ—à. (–¶–µ –Ω–µ–º–æ–∂–ª–∏–≤–æ –±–µ–∑ Brute Force).

**–Ü–Ω–∂–µ–Ω–µ—Ä–Ω–∏–π –∞–Ω–∞–ª—ñ–∑:**

‚úÖ **–©–æ –º–∏ –∑–∞—Ö–∏—Å—Ç–∏–ª–∏:**
- –í–∏—Ç—ñ–∫ `localStorage` –Ω–µ –≤–∏–¥–∞—î –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å.
- XSS-—Å–∫—Ä–∏–ø—Ç, —â–æ —á–∏—Ç–∞—î localStorage, –±–∞—á–∏—Ç—å —Ç—ñ–ª—å–∫–∏ —Ö–µ—à.

‚ùå **–©–æ –ù–ï –∑–∞—Ö–∏—â–µ–Ω–æ (—á–æ–º—É —Ü–µ –Ω–µ Production):**
- **Pass-the-Hash:** –ó–ª–æ–≤–º–∏—Å–Ω–∏–∫ –º–æ–∂–µ —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏ —Ö–µ—à —ñ –ø—ñ–¥—Å—Ç–∞–≤–∏—Ç–∏ –π–æ–≥–æ –∑–∞–º—ñ—Å—Ç—å –ø–∞—Ä–æ–ª—è (—Ö–µ—à = –Ω–æ–≤–∏–π –ø–∞—Ä–æ–ª—å).
- **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å Salt:** –î–≤–∞ —é–∑–µ—Ä–∏ –∑ –æ–¥–Ω–∞–∫–æ–≤–∏–º –ø–∞—Ä–æ–ª–µ–º –º–∞—é—Ç—å –æ–¥–Ω–∞–∫–æ–≤—ñ —Ö–µ—à—ñ (Rainbow Table Attack).
- **–ö–ª—ñ—î–Ω—Ç—Å—å–∫–∏–π –∫–æ–¥ –ª–µ–≥–∫–æ –º–æ–¥–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏:** –ó–ª–æ–≤–º–∏—Å–Ω–∏–∫ –º–æ–∂–µ –∑–º—ñ–Ω–∏—Ç–∏ JS, —â–æ–± –≤—ñ–¥–ø—Ä–∞–≤–ª—è—Ç–∏ –ø–∞—Ä–æ–ª—ñ –Ω–∞ —Å–≤—ñ–π —Å–µ—Ä–≤–µ—Ä.

**–í–∏—Å–Ω–æ–≤–æ–∫:** –í–∏ –¥—ñ–∑–Ω–∞–ª–∏—Å—è, —è–∫ –ø—Ä–∞—Ü—é—î SHA-256 —ñ —á–æ–º—É **—Ö–µ—à—É–≤–∞–Ω–Ω—è ‚Äî —Ü–µ –∑–∞–≤–¥–∞–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä–∞, –∞ –Ω–µ –∫–ª—ñ—î–Ω—Ç–∞**. –£ —Ä–µ–∞–ª—å–Ω–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ bcrypt/argon2 –Ω–∞ –±–µ–∫–µ–Ω–¥—ñ –∑ —É–Ω—ñ–∫–∞–ª—å–Ω–∏–º salt –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —é–∑–µ—Ä–∞.