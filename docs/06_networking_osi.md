# Лекція 6: Архітектура Інтернету. OSI, TCP/IP та DNS

## Експрес-опитування: Як подорожують байти?

1.  Чому онлайн-ігри (CS:GO, Dota) використовують UDP, а банківські додатки — TCP?
2.  Ви ввели в браузері `google.com`. Звідки ваш комп'ютер знає, на яку IP-адресу надсилати запит?
3.  Що таке "пакет" в інтернеті?

<details markdown="1">
<summary>Відповіді інженера</summary>

1.  **Швидкість vs Надійність.** UDP (User Datagram Protocol) "вистрелив і забув" — це швидко, втрата пакету не критична. TCP (Transmission Control Protocol) гарантує доставку, але вимагає підтвердження (Handshake), що повільніше .
2.  **DNS (Domain Name System).** Це "телефонна книга" інтернету. Браузер запитує DNS-сервер: "Хто такий google.com?", а той відповідає: `142.250.185.78` .
3.  **Шматок даних.** Файл не летить цілком. Він розбивається на тисячі маленьких пакетів (MTU ~1500 байт), які летять різними шляхами і збираються докупи на вашому ПК .

</details>

---

## 1. Модель OSI: 7 кіл пекла (спрощено)

Інженери розбили мережу на рівні, щоб не збожеволіти. Це абстракція .

| Рівень | Назва | Що передається | Приклад | Що робить? |
| :--- | :--- | :--- | :--- | :--- |
| **7** | **Application** | Data | HTTP, DNS | Те, що бачить програма (браузер). |
| **4** | **Transport** | Segments | TCP, UDP | Гарантує доставку і порти (кому саме на комп'ютері). |
| **3** | **Network** | Packets | IP | Адресація (куди в світі це відправити). |
| **2** | **Data Link** | Frames | Ethernet, Wi-Fi | Фізична адресація (MAC) всередині кімнати. |
| **1** | **Physical** | Bits | Кабель, Радіо | Нулі та одиниці по дротах. |

> **Інсайт:** Коли ви відправляєте запит, дані проходять шлях 7 -> 1 (Інкапсуляція), летять по дротах, а на сервері йдуть 1 -> 7 (Декапсуляція) .

---

## 2. TCP vs UDP: Гарантія чи Швидкість?

### TCP (Transmission Control Protocol)
* **Принцип:** "Привіт, ти мене чуєш? — Так, чую. — Ок, я відправляю дані." (3-way Handshake) .
* **Фішка:** Якщо пакет загубився, TCP відправить його знову. Порядок гарантований.
* **Використання:** Веб-сайти (HTTP), пошта, файли.

### UDP (User Datagram Protocol)
* **Принцип:** "Лови!" (Кидає дані, не чекаючи відповіді) .
* **Фішка:** Ніяких затримок на рукостискання. Втратив кадр? Ну і грець з ним, малюємо наступний.
* **Використання:** Відеодзвінки, Стрімінг, Ігри.

---

## 3. IP та DNS: Адресація

**IP-адреса** — це як поштова адреса будинку (`192.168.0.1`).
**Порт** — це номер квартири в будинку (`:80`, `:443`, `:3000`).

Коли ви запускаєте локальний сервер (`localhost:3000`), ви кажете: *"Слухай запити на моєму комп'ютері (localhost) у квартирі №3000"* .

### DNS (Domain Name System)
Люди не пам'ятають цифри. Ми пам'ятаємо імена.
DNS — це розподілена база даних, яка перетворює `facebook.com` -> `157.240.214.35`.

**Ланцюжок:**
1.  Кеш браузера.
2.  Кеш ОС.
3.  Роутер.
4.  ISP (Провайдер).
5.  Google DNS (`8.8.8.8`).

---

## Практикум: "Мережевий детектив"

1.  **Ping:** Відкрийте термінал. Напишіть `ping google.com`. Ви побачите час відповіді (Latency).
2.  **TraceRoute:** Напишіть `tracert google.com` (Windows) або `traceroute google.com` (Mac/Linux).
    * Ви побачите кожен стрибок (Hop) від вашого роутера через провайдера, через океан до сервера Google. Це фізичний шлях ваших даних.
3.  **DevTools:** Вкладка Network -> Timing.
    * Подивіться `DNS Lookup` — скільки часу браузер шукав IP.
    * Подивіться `Initial Connection` — скільки часу зайняв TCP Handshake.

## Домашнє завдання

Дізнайтеся свою зовнішню IP-адресу. Попросіть друга (в іншій мережі) спробувати відкрити вашу гру по цій IP-адресі.
**Питання:** Чому у нього не вийде? (Гугліть "NAT" та "Public vs Private IP") .